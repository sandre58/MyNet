<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:my="http://mynet.com/avalonia"
                    x:CompileBindings="True">

    <ControlTheme x:Key="{x:Type Expander}" TargetType="Expander" BasedOn="{StaticResource {x:Type HeaderedContentControl}}">
        <Setter Property="Template">
            <ControlTemplate TargetType="Expander">
                <Border Name="PART_Root"
                        Padding="0"
                        my:ShadowAssist.ShadowDepth="{TemplateBinding my:ShadowAssist.ShadowDepth}"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="{TemplateBinding CornerRadius}">
                    <Border ClipToBounds="{TemplateBinding ClipToBounds}" CornerRadius="{TemplateBinding CornerRadius}">
                        <Grid Name="PART_Grid" RowDefinitions="Auto,*">

                            <LayoutTransformControl Name="ExpanderHeaderLayoutContainer" Grid.Row="0">
                                <ToggleButton Name="ExpanderHeader"
                                              HorizontalAlignment="Stretch"
                                              HorizontalContentAlignment="Stretch"
                                              Classes="no-disablable"
                                              IsChecked="{TemplateBinding IsExpanded, Mode=TwoWay}"
                                              Theme="{StaticResource MyNet.Theme.ToggleButton.Clean}">
                                    <Border Name="PART_Header"
                                            Height="{TemplateBinding my:HeaderAssist.Size}"
                                            Padding="{TemplateBinding my:HeaderAssist.Padding}"
                                            my:ShadowAssist.ShadowDepth="{TemplateBinding my:HeaderAssist.ShadowDepth}"
                                            Background="{TemplateBinding my:HeaderAssist.Background}"
                                            BorderBrush="{TemplateBinding my:HeaderAssist.BorderBrush}"
                                            BorderThickness="{TemplateBinding my:HeaderAssist.BorderThickness}"
                                            CornerRadius="{TemplateBinding my:HeaderAssist.CornerRadius}"
                                            IsVisible="{Binding Header, RelativeSource={RelativeSource TemplatedParent}, Converter={x:Static my:NullConverter.IsNotNull}}"
                                            Opacity="{TemplateBinding my:HeaderAssist.Opacity}">

                                        <Grid ColumnDefinitions="*, Auto">
                                            <ContentPresenter Name="PART_HeaderPresenter"
                                                              HorizontalContentAlignment="{TemplateBinding my:HeaderAssist.HorizontalAlignment}"
                                                              VerticalContentAlignment="{TemplateBinding my:HeaderAssist.VerticalAlignment}"
                                                              Content="{TemplateBinding Header}"
                                                              ContentTemplate="{TemplateBinding HeaderTemplate}"
                                                              FontFamily="{TemplateBinding my:HeaderAssist.FontFamily}"
                                                              FontSize="{TemplateBinding my:HeaderAssist.FontSize}"
                                                              FontStyle="{TemplateBinding my:HeaderAssist.FontStyle}"
                                                              FontWeight="{TemplateBinding my:HeaderAssist.FontWeight}"
                                                              Foreground="{TemplateBinding my:HeaderAssist.Foreground}"
                                                              RecognizesAccessKey="True">
                                                <ContentPresenter.Styles>
                                                    <Style Selector="PathIcon">
                                                        <Setter Property="Height" Value="{StaticResource MyNet.Size.Icon.Medium}" />
                                                        <Setter Property="Width" Value="{StaticResource MyNet.Size.Icon.Medium}" />
                                                    </Style>
                                                </ContentPresenter.Styles>
                                            </ContentPresenter>

                                            <PathIcon Name="PART_ExpanderIcon"
                                                      Grid.Column="1"
                                                      Margin="4 0 8 0"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      Classes="Glyph DropDown"
                                                      Focusable="False"
                                                      Foreground="{TemplateBinding my:HeaderAssist.Foreground}"
                                                      IsHitTestVisible="False"
                                                      UseLayoutRounding="False" />
                                        </Grid>
                                    </Border>
                                </ToggleButton>
                            </LayoutTransformControl>

                            <my:ExpandControl Name="PART_ExpandControl"
                                              Grid.Row="1"
                                              Padding="{TemplateBinding Padding}"
                                              HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                              Content="{TemplateBinding Content}"
                                              ContentTemplate="{TemplateBinding ContentTemplate}"
                                              FontFamily="{TemplateBinding FontFamily}"
                                              FontSize="{TemplateBinding FontSize}"
                                              FontStyle="{TemplateBinding FontStyle}"
                                              FontWeight="{TemplateBinding FontWeight}"
                                              IsVisible="{TemplateBinding IsExpanded, Mode=TwoWay}" />
                        </Grid>
                    </Border>
                </Border>
            </ControlTemplate>
        </Setter>

        <Style Selector="^:not(.no-transitions) /template/ my|ExpandControl#PART_ExpandControl">
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Easing="CircularEaseOut" Property="Multiplier" Duration="{StaticResource MyNet.Timespan.Slide}" />
                </Transitions>
            </Setter>
        </Style>

        <Style Selector="^:expanded /template/ PathIcon#PART_ExpanderIcon">
            <Setter Property="RenderTransform" Value="rotate(180deg)" />
        </Style>

        <Style Selector="^ /template/ my|ExpandControl#PART_ExpandControl">
            <Setter Property="Multiplier" Value="0" />
        </Style>

        <Style Selector="^:expanded /template/ my|ExpandControl#PART_ExpandControl">
            <Setter Property="Multiplier" Value="1" />
        </Style>

        <!-- Layout -->
        <Style Selector="^:left, ^.Right">
            <Style Selector="^ /template/ Grid#PART_Grid">
                <Setter Property="my:GridAssist.RowDefinitions">
                    <RowDefinitions>
                        <RowDefinition Height="*" />
                    </RowDefinitions>
                </Setter>
                <Setter Property="my:GridAssist.ColumnDefinitions">
                    <ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </ColumnDefinitions>
                </Setter>
            </Style>
            <Style Selector="^ /template/ LayoutTransformControl#ExpanderHeaderLayoutContainer">
                <Setter Property="LayoutTransform">
                    <RotateTransform Angle="90" />
                </Setter>
                <Setter Property="VerticalAlignment" Value="Stretch" />
            </Style>
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="VerticalAlignment" Value="Stretch" />

            <Style Selector="^ /template/ LayoutTransformControl#ExpanderHeaderLayoutContainer">
                <Setter Property="Width" Value="{Binding $parent[Expander].(my:HeaderAssist.Size)}" />
                <Setter Property="Height" Value="{x:Static x:Double.NaN}" />
                <Setter Property="Grid.Row" Value="0" />
                <Setter Property="Grid.Column" Value="1" />
            </Style>
            <Style Selector="^ /template/ my|ExpandControl#PART_ExpandControl">
                <Setter Property="Orientation" Value="Horizontal" />
                <Setter Property="Grid.Row" Value="0" />
                <Setter Property="Grid.Column" Value="0" />
            </Style>
        </Style>

        <Style Selector="^:right, ^.Left">
            <Style Selector="^ /template/ Grid#PART_Grid">
                <Setter Property="my:GridAssist.RowDefinitions">
                    <RowDefinitions>
                        <RowDefinition Height="*" />
                    </RowDefinitions>
                </Setter>
                <Setter Property="my:GridAssist.ColumnDefinitions">
                    <ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </ColumnDefinitions>
                </Setter>
            </Style>
            <Style Selector="^ /template/ LayoutTransformControl#ExpanderHeaderLayoutContainer">
                <Setter Property="LayoutTransform">
                    <RotateTransform Angle="-90" />
                </Setter>
                <Setter Property="VerticalAlignment" Value="Stretch" />
            </Style>
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Stretch" />

            <Style Selector="^ /template/ LayoutTransformControl#ExpanderHeaderLayoutContainer">
                <Setter Property="Width" Value="{Binding $parent[Expander].(my:HeaderAssist.Size)}" />
                <Setter Property="Height" Value="{x:Static x:Double.NaN}" />
                <Setter Property="Grid.Row" Value="0" />
                <Setter Property="Grid.Column" Value="0" />
            </Style>
            <Style Selector="^ /template/ my|ExpandControl#PART_ExpandControl">
                <Setter Property="Orientation" Value="Horizontal" />
                <Setter Property="Grid.Row" Value="0" />
                <Setter Property="Grid.Column" Value="1" />
            </Style>
        </Style>

        <Style Selector="^:down, ^.Top">
            <Style Selector="^ /template/ Grid#PART_Grid">
                <Setter Property="my:GridAssist.RowDefinitions">
                    <RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </RowDefinitions>
                </Setter>
                <Setter Property="my:GridAssist.ColumnDefinitions">
                    <ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                    </ColumnDefinitions>
                </Setter>
            </Style>
            <Style Selector="^ /template/ PathIcon#PART_ExpanderIcon">
                <Setter Property="Data" Value="{StaticResource MyNet.Geometry.ChevronDown}" />
            </Style>
            <Style Selector="^ /template/ LayoutTransformControl#ExpanderHeaderLayoutContainer">
                <Setter Property="Height" Value="{Binding $parent[Expander].(my:HeaderAssist.Size)}" />
                <Setter Property="Width" Value="{x:Static x:Double.NaN}" />
                <Setter Property="Grid.Row" Value="0" />
                <Setter Property="Grid.Column" Value="0" />
            </Style>
            <Style Selector="^ /template/ my|ExpandControl#PART_ExpandControl">
                <Setter Property="Orientation" Value="Vertical" />
                <Setter Property="Grid.Row" Value="1" />
                <Setter Property="Grid.Column" Value="0" />
            </Style>
        </Style>

        <Style Selector="^:up, ^.Bottom">
            <Style Selector="^ /template/ Grid#PART_Grid">
                <Setter Property="my:GridAssist.RowDefinitions">
                    <RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </RowDefinitions>
                </Setter>
                <Setter Property="my:GridAssist.ColumnDefinitions">
                    <ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                    </ColumnDefinitions>
                </Setter>
            </Style>
            <Style Selector="^ /template/ PathIcon#PART_ExpanderIcon">
                <Setter Property="Data" Value="{StaticResource MyNet.Geometry.ChevronUp}" />
            </Style>
            <Style Selector="^ /template/ LayoutTransformControl#ExpanderHeaderLayoutContainer">
                <Setter Property="Height" Value="{Binding $parent[Expander].(my:HeaderAssist.Size)}" />
                <Setter Property="Width" Value="{x:Static x:Double.NaN}" />
                <Setter Property="Grid.Row" Value="1" />
                <Setter Property="Grid.Column" Value="0" />
            </Style>
            <Style Selector="^ /template/ my|ExpandControl#PART_ExpandControl">
                <Setter Property="Orientation" Value="Vertical" />
                <Setter Property="Grid.Row" Value="0" />
                <Setter Property="Grid.Column" Value="0" />
            </Style>
        </Style>

    </ControlTheme>

    <ControlTheme x:Key="MyNet.Theme.Expander.Button" TargetType="Expander">
        <Setter Property="HorizontalAlignment" Value="{StaticResource MyNet.HorizontalAlignment.Container}" />
        <Setter Property="VerticalAlignment" Value="{StaticResource MyNet.VerticalAlignment.Container}" />
        <Setter Property="Padding" Value="{StaticResource MyNet.Padding.Container}" />
        <Setter Property="Focusable" Value="false" />
        <Setter Property="HorizontalContentAlignment" Value="Left" />
        <Setter Property="VerticalContentAlignment" Value="Top" />
        <Setter Property="HeaderTemplate" Value="{StaticResource MyNet.DataTemplate.Icon.Left}" />
        <Setter Property="ClipToBounds" Value="False" />
        <Setter Property="my:ExpanderAssist.ButtonTheme" Value="{StaticResource {x:Type Button}}" />
        <Setter Property="Template">
            <ControlTemplate TargetType="Expander">
                <Grid Name="PART_Grid" RowDefinitions="Auto,*">

                    <LayoutTransformControl Name="ExpanderHeaderLayoutContainer" Grid.Row="0">
                        <ToggleButton Name="ExpanderHeader"
                                      HorizontalAlignment="Stretch"
                                      HorizontalContentAlignment="Stretch"
                                      my:ClassesAssist.ClassSource="{TemplateBinding}"
                                      Classes="no-disablable"
                                      IsChecked="{TemplateBinding IsExpanded, Mode=TwoWay}"
                                      IsVisible="{Binding Header, RelativeSource={RelativeSource TemplatedParent}, Converter={x:Static my:NullConverter.IsNotNull}}"
                                      Theme="{TemplateBinding my:ExpanderAssist.ButtonTheme}">

                            <Grid ColumnDefinitions="*, Auto">
                                <ContentPresenter Name="PART_HeaderPresenter"
                                                  Content="{TemplateBinding Header}"
                                                  ContentTemplate="{TemplateBinding HeaderTemplate}"
                                                  RecognizesAccessKey="True" />

                                <PathIcon Name="PART_ExpanderIcon"
                                          Grid.Column="1"
                                          Margin="4 0 8 0"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          Classes="Glyph DropDown"
                                          Focusable="False"
                                          IsHitTestVisible="False"
                                          UseLayoutRounding="False" />
                            </Grid>
                        </ToggleButton>
                    </LayoutTransformControl>

                    <my:ExpandControl Name="PART_ExpandControl"
                                      Grid.Row="1"
                                      Padding="{TemplateBinding Padding}"
                                      HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                      VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                      Content="{TemplateBinding Content}"
                                      ContentTemplate="{TemplateBinding ContentTemplate}"
                                      FontFamily="{TemplateBinding FontFamily}"
                                      FontSize="{TemplateBinding FontSize}"
                                      FontStyle="{TemplateBinding FontStyle}"
                                      FontWeight="{TemplateBinding FontWeight}"
                                      IsVisible="{TemplateBinding IsExpanded, Mode=TwoWay}" />
                </Grid>
            </ControlTemplate>
        </Setter>

        <Style Selector="^:not(.no-transitions) /template/ my|ExpandControl#PART_ExpandControl">
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Easing="CircularEaseOut" Property="Multiplier" Duration="{StaticResource MyNet.Timespan.Slide}" />
                </Transitions>
            </Setter>
        </Style>

        <Style Selector="^:expanded /template/ PathIcon#PART_ExpanderIcon">
            <Setter Property="RenderTransform" Value="rotate(180deg)" />
        </Style>

        <Style Selector="^ /template/ my|ExpandControl#PART_ExpandControl">
            <Setter Property="Multiplier" Value="0" />
        </Style>

        <Style Selector="^:expanded /template/ my|ExpandControl#PART_ExpandControl">
            <Setter Property="Multiplier" Value="1" />
        </Style>

        <!-- Layout -->
        <Style Selector="^:left, ^.Right">
            <Style Selector="^ /template/ Grid#PART_Grid">
                <Setter Property="my:GridAssist.RowDefinitions">
                    <RowDefinitions>
                        <RowDefinition Height="*" />
                    </RowDefinitions>
                </Setter>
                <Setter Property="my:GridAssist.ColumnDefinitions">
                    <ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </ColumnDefinitions>
                </Setter>
            </Style>
            <Style Selector="^ /template/ LayoutTransformControl#ExpanderHeaderLayoutContainer">
                <Setter Property="LayoutTransform">
                    <RotateTransform Angle="90" />
                </Setter>
                <Setter Property="VerticalAlignment" Value="Stretch" />
            </Style>
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="VerticalAlignment" Value="Stretch" />

            <Style Selector="^ /template/ LayoutTransformControl#ExpanderHeaderLayoutContainer">
                <Setter Property="Width" Value="{Binding $parent[Expander].(my:HeaderAssist.Size)}" />
                <Setter Property="Height" Value="{x:Static x:Double.NaN}" />
                <Setter Property="Grid.Row" Value="0" />
                <Setter Property="Grid.Column" Value="1" />
            </Style>
            <Style Selector="^ /template/ my|ExpandControl#PART_ExpandControl">
                <Setter Property="Orientation" Value="Horizontal" />
                <Setter Property="Grid.Row" Value="0" />
                <Setter Property="Grid.Column" Value="0" />
            </Style>
        </Style>

        <Style Selector="^:right, ^.Left">
            <Style Selector="^ /template/ Grid#PART_Grid">
                <Setter Property="my:GridAssist.RowDefinitions">
                    <RowDefinitions>
                        <RowDefinition Height="*" />
                    </RowDefinitions>
                </Setter>
                <Setter Property="my:GridAssist.ColumnDefinitions">
                    <ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </ColumnDefinitions>
                </Setter>
            </Style>
            <Style Selector="^ /template/ LayoutTransformControl#ExpanderHeaderLayoutContainer">
                <Setter Property="LayoutTransform">
                    <RotateTransform Angle="-90" />
                </Setter>
                <Setter Property="VerticalAlignment" Value="Stretch" />
            </Style>
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Stretch" />

            <Style Selector="^ /template/ LayoutTransformControl#ExpanderHeaderLayoutContainer">
                <Setter Property="Width" Value="{Binding $parent[Expander].(my:HeaderAssist.Size)}" />
                <Setter Property="Height" Value="{x:Static x:Double.NaN}" />
                <Setter Property="Grid.Row" Value="0" />
                <Setter Property="Grid.Column" Value="0" />
            </Style>
            <Style Selector="^ /template/ my|ExpandControl#PART_ExpandControl">
                <Setter Property="Orientation" Value="Horizontal" />
                <Setter Property="Grid.Row" Value="0" />
                <Setter Property="Grid.Column" Value="1" />
            </Style>
        </Style>

        <Style Selector="^:down, ^.Top">
            <Style Selector="^ /template/ Grid#PART_Grid">
                <Setter Property="my:GridAssist.RowDefinitions">
                    <RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </RowDefinitions>
                </Setter>
                <Setter Property="my:GridAssist.ColumnDefinitions">
                    <ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                    </ColumnDefinitions>
                </Setter>
            </Style>
            <Style Selector="^ /template/ PathIcon#PART_ExpanderIcon">
                <Setter Property="Data" Value="{StaticResource MyNet.Geometry.ChevronDown}" />
            </Style>
            <Style Selector="^ /template/ LayoutTransformControl#ExpanderHeaderLayoutContainer">
                <Setter Property="Height" Value="{Binding $parent[Expander].(my:HeaderAssist.Size)}" />
                <Setter Property="Width" Value="{x:Static x:Double.NaN}" />
                <Setter Property="Grid.Row" Value="0" />
                <Setter Property="Grid.Column" Value="0" />
            </Style>
            <Style Selector="^ /template/ my|ExpandControl#PART_ExpandControl">
                <Setter Property="Orientation" Value="Vertical" />
                <Setter Property="Grid.Row" Value="1" />
                <Setter Property="Grid.Column" Value="0" />
            </Style>
        </Style>

        <Style Selector="^:up, ^.Bottom">
            <Style Selector="^ /template/ Grid#PART_Grid">
                <Setter Property="my:GridAssist.RowDefinitions">
                    <RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </RowDefinitions>
                </Setter>
                <Setter Property="my:GridAssist.ColumnDefinitions">
                    <ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                    </ColumnDefinitions>
                </Setter>
            </Style>
            <Style Selector="^ /template/ PathIcon#PART_ExpanderIcon">
                <Setter Property="Data" Value="{StaticResource MyNet.Geometry.ChevronUp}" />
            </Style>
            <Style Selector="^ /template/ LayoutTransformControl#ExpanderHeaderLayoutContainer">
                <Setter Property="Height" Value="{Binding $parent[Expander].(my:HeaderAssist.Size)}" />
                <Setter Property="Width" Value="{x:Static x:Double.NaN}" />
                <Setter Property="Grid.Row" Value="1" />
                <Setter Property="Grid.Column" Value="0" />
            </Style>
            <Style Selector="^ /template/ my|ExpandControl#PART_ExpandControl">
                <Setter Property="Orientation" Value="Vertical" />
                <Setter Property="Grid.Row" Value="0" />
                <Setter Property="Grid.Column" Value="0" />
            </Style>
        </Style>

    </ControlTheme>
</ResourceDictionary>
